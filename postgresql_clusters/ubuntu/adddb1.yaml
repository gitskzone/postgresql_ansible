---
template_version: 0.1
# used to define a database, logins, schemas, roles with associated schema perms and members
# additional metadata is used for inventory and reporting purposes
# use the latest template version and variable definition to ensure the latest funcionality

database:
  db_name: appdb1
  db_owner: postgres
  db_encoding: UTF8
  db_conn_limit: 50
  #db_cname: default # default will be <db_name>-db.db.domain
  db_extensions: 
    - cube
    - lo
  db_logins: # postgresql roles with the login permission and required database level privileges
    - login_name: product_login
      login_priv: CONNECT,TEMP # CREATE,CONNECT,TEMP,ALL
      login_conn_limit: 10
    - login_name: sales_login
      login_priv: "TEMP,CONNECT"
      login_conn_limit: 10
    - login_name: testdb_app_login
      login_priv: ALL
      login_conn_limit: 5  
  db_schemas:
    - schema_name: products
      schema_owner: product_login
      schema_extensions: 
        - hstore
    - schema_name: sales
      schema_owner: sales_login
      schema_extensions: []        
  db_priv_roles: # roles (nologin) to create and required schema privileges, internally roles will be prefixed with the database name
    - role_name: product_development
      role_schema_privs: 
        - schema_name: products
          schema_priv: SELECT,INSERT,UPDATE,DELETE
        - schema_name: sales
          schema_priv: SELECT
      role_members:
        - product_login
        - testdb_app_login
    - role_name: sales_development
      role_schema_privs: 
        - schema_name: products
          schema_priv: SELECT
        - schema_name: sales
          schema_priv: SELECT,INSERT,UPDATE,DELETE
      role_members:
        - testdb_app_login
        - sales_login
